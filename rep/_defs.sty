\NeedsTeXFormat{LaTeX2e}% LaTeX 2.09 can't be used (nor non-LaTeX)
[1994/12/01]% LaTeX date must December 1994 or later
\ProvidesPackage{_defs}[1999/11/29 v1.2d]

%%%%%%%%%%%  Biblio %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\DeclareSourcemap{
  \maps[datatype=bibtex]{
    \map{
      \step[fieldset=language, fieldvalue={tempruorder}]
    }
    \map[overwrite]{
      \step[fieldsource=language, match=russian, final]
      \step[fieldsource=presort, 
        match=\regexp{(.+)}, 
        replace=\regexp{aa$1}]
    }
    \map{
      \step[fieldsource=language, match=russian, final]
      \step[fieldset=presort, fieldvalue={az}]
    }
    \map[overwrite]{
      \step[fieldsource=language, notmatch=russian, final]
      \step[fieldsource=presort, 
        match=\regexp{(.+)}, 
        replace=\regexp{za$1}]
    }
    \map{
      \step[fieldsource=language, notmatch=russian, final]
      \step[fieldset=presort, fieldvalue={zz}]
    }
    \map{
      \step[fieldsource=language, match={tempruorder}, final]
      \step[fieldset=language, null]
    }
  }
}

%%%%%%%%%%%  Format %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\doubt}[1]{{\textcolor{red}{#1}}}
\newcommand{\addendum}[1]{\textcolor{blue}{#1}}
\newcommand{\old}[1]{}
\newcommand{\optional}[1]{$\mathbf{\bigl[}$#1$\mathbf{\bigr]}$}
\newcommand{\mathoptional}[1]{\ensuremath{\mathbf{\bigl[}#1\mathbf{\bigr]}}}
\newcommand{\implicit}[1]{$\mathbf{\bigl\{}$#1$\mathbf{\bigr\}}$}
\newcommand{\mathimplicit}[1]{\ensuremath{\mathbf{\bigl\{}#1\mathbf{\bigr\}}}}

\newcommand\algname[1]{\lstinline{#1}}
\expandafter\patchcmd\csname \string\lstinline\endcsname{%
  \leavevmode
  \bgroup
}{%
  \leavevmode
  \ifmmode\hbox\fi
  \bgroup
}{}{%
  \typeout{Patching of \string\lstinline\space failed!}%
}

\newcounter{defctr}
\setcounter{defctr}{0}
\renewcommand{\thedefctr}
{\addtocounter{defctr}{1}\thechapter.\arabic{defctr}}


%%%%%%%%%%% Theorem %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newtheorem{proposition}{Предложение}[chapter]
\newtheorem*{proposition*}{Предложение}
\newtheorem*{remark*}{Замечание}
\newtheorem{remark}{Замечание}[chapter]
\newtheorem{property}{Свойство}[chapter]
\newtheorem{theorem}{Теорема}[chapter]

%%%%%%%%%%% Local Commands %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\providecommand{\ShLo}{\mathop{\texttt{ShLo}}\nolimits}
\providecommand{\ShHi}{\mathop{\texttt{ShHi}}\nolimits}
\providecommand{\RotHi}{\mathop{\texttt{RotHi}}\nolimits}
\providecommand{\Lo}{\mathop{\texttt{Lo}}\nolimits}

\providecommand{\bash}[1][]{\ifthenelse{\isempty{#1}{}}
  {\textup{\textsf{Bash}}\xspace}{\textup{\textsf{Bash#1}}\xspace}}

%%%%%%%%%%%%%%%%%%%%%%%% Renew %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\<}{<<}
\renewcommand{\>}{>>}
\renewcommand{\le}{\leqslant}
\renewcommand{\leq}{\leqslant}
\renewcommand{\ge}{\geqslant}
\renewcommand{\geq}{\geqslant}
\renewcommand{\atop}[2]{\genfrac{}{}{0pt}{}{#1}{#2}}
\renewcommand{\pmod}[1]{\allowbreak\ifinner\mkern4mu\else\mkern9mu\fi
({\rm mod}\,\,#1)}
\providecommand{\No}{\textnumero}

%%%%%%%%%%%%%%%%%%%%%%%% Req %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcounter{reqctr}
\renewcommand{\thereqctr}{\arabic{reqctr}}
\makeatletter
\@addtoreset{reqctr}{section}
\newcommand{\req}[2]{
	\addtocounter{reqctr}{1}
	\def\@currentlabel{#1.\thereqctr}
	{\bf Требование~#1.\thereqctr~(#2)}.\;\xspace
}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%% Local %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\renewcommand\figurename{Рисунок}
\renewcommand\tablename{Таблица}
\renewcommand\contentsname{Содержание}
\renewcommand{\bibname}{Библиография}

%%%%%%%%%%%%%%%%%%%%%%%% Ops %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\renewcommand{\div}{\mid}
\newcommand{\nodiv}{\not{\!|\;}}

%%%%%%%%%%%%%%%%%%%%%%%% Commands %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\providecommand{\PrSymbol}{\mbox{\sffamily\upshape\bfseries P}}
\renewcommand{\Pr}[2][]{\PrSymbol_{#1}\left\{ #2 \right\}}

\providecommand{\Adv}[1][]{\ifthenelse{\isempty{#1}{}}
  {\textup{\textbf{Adv}}}{\textup{\textbf{Adv}}^{\algname{#1}}}}

%%%%%%%%%%%%%%%%%%%%%%%% Symbols %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\bbA}{{\mathbb A}}   \newcommand{\scrA}{{\mathscr A}}   \newcommand{\calA}{{\mathcal A}}
\newcommand{\bbB}{{\mathbb B}}   \newcommand{\scrB}{{\mathscr B}}   \newcommand{\calB}{{\mathcal B}}
\newcommand{\bbC}{{\mathbb C}}   \newcommand{\scrC}{{\mathscr C}}   \newcommand{\calC}{{\mathcal C}}
\newcommand{\bbD}{{\mathbb D}}   \newcommand{\scrD}{{\mathscr D}}   \newcommand{\calD}{{\mathcal D}}
\newcommand{\bbE}{{\mathbb E}}   \newcommand{\scrE}{{\mathscr E}}   \newcommand{\calE}{{\mathcal E}}
\newcommand{\bbF}{{\mathbb F}}   \newcommand{\scrF}{{\mathscr F}}   \newcommand{\calF}{{\mathcal F}}
\newcommand{\bbG}{{\mathbb G}}   \newcommand{\scrG}{{\mathscr G}}   \newcommand{\calG}{{\mathcal G}}
\newcommand{\bbH}{{\mathbb H}}   \newcommand{\scrH}{{\mathscr H}}   \newcommand{\calH}{{\mathcal H}}
\newcommand{\bbI}{{\mathbb I}}   \newcommand{\scrI}{{\mathscr I}}   \newcommand{\calI}{{\mathcal I}}
\newcommand{\bbJ}{{\mathbb J}}   \newcommand{\scrJ}{{\mathscr J}}   \newcommand{\calJ}{{\mathcal J}}
\newcommand{\bbK}{{\mathbb K}}   \newcommand{\scrK}{{\mathscr K}}   \newcommand{\calK}{{\mathcal K}}
\newcommand{\bbL}{{\mathbb L}}   \newcommand{\scrL}{{\mathscr L}}   \newcommand{\calL}{{\mathcal L}}
\newcommand{\bbM}{{\mathbb M}}   \newcommand{\scrM}{{\mathscr M}}   \newcommand{\calM}{{\mathcal M}}
\newcommand{\bbN}{{\mathbb N}}   \newcommand{\scrN}{{\mathscr N}}   \newcommand{\calN}{{\mathcal N}}
\newcommand{\bbO}{{\mathbb O}}   \newcommand{\scrO}{{\mathscr O}}   \newcommand{\calO}{{\mathcal O}}
\newcommand{\bbP}{{\mathbb P}}   \newcommand{\scrP}{{\mathscr P}}   \newcommand{\calP}{{\mathcal P}}
\newcommand{\bbQ}{{\mathbb Q}}   \newcommand{\scrQ}{{\mathscr Q}}   \newcommand{\calQ}{{\mathcal Q}}
\newcommand{\bbR}{{\mathbb R}}   \newcommand{\scrR}{{\mathscr R}}   \newcommand{\calR}{{\mathcal R}}
\newcommand{\bbS}{{\mathbb S}}   \newcommand{\scrS}{{\mathscr S}}   \newcommand{\calS}{{\mathcal S}}
\newcommand{\bbT}{{\mathbb T}}   \newcommand{\scrT}{{\mathscr T}}   \newcommand{\calT}{{\mathcal T}}
\newcommand{\bbU}{{\mathbb U}}   \newcommand{\scrU}{{\mathscr U}}   \newcommand{\calU}{{\mathcal U}}
\newcommand{\bbV}{{\mathbb V}}   \newcommand{\scrV}{{\mathscr V}}   \newcommand{\calV}{{\mathcal V}}
\newcommand{\bbW}{{\mathbb W}}   \newcommand{\scrW}{{\mathscr W}}   \newcommand{\calW}{{\mathcal W}}
\newcommand{\bbX}{{\mathbb X}}   \newcommand{\scrX}{{\mathscr X}}   \newcommand{\calX}{{\mathcal X}}
\newcommand{\bbY}{{\mathbb Y}}   \newcommand{\scrY}{{\mathscr Y}}   \newcommand{\calY}{{\mathcal Y}}
\newcommand{\bbZ}{{\mathbb Z}}   \newcommand{\scrZ}{{\mathscr Z}}   \newcommand{\calZ}{{\mathcal Z}}

\newcommand{\CC}{\bbC}
\newcommand{\QQ}{\bbQ}
\newcommand{\FF}{\bbF}
\newcommand{\NN}{\bbN}
\newcommand{\RR}{\bbR}
\newcommand{\ZZ}{\bbZ}

\definecolor{lgray}{gray}{0.95}

\lstset{
  % language=C++,                 % choose the language of the code
  xleftmargin=\parindent,         % leftmargin
  basicstyle=\normalsize\tt,      % the size of the fonts that are used for the code
  keywordstyle=\color{Black},
  numbers=none,                   % where to put the line-numbers
  numberstyle=\normalsize,        % the size of the fonts that are used for the line-numbers
  stepnumber=2,                   % the step between two line-numbers. If it's 1 each line 
                                  % will be numbered
  numbersep=5pt,                  % how far the line-numbers are from the code
  backgroundcolor=\color{lgray},  % choose the background color. You must add \usepackage{color}
  showspaces=false,               % show spaces adding particular underscores
  showstringspaces=false,         % underline spaces within strings
  showtabs=false,                 % show tabs within strings adding particular underscores
  frame=none,                     % adds a frame around the code
  tabsize=2,                      % sets default tabsize to 2 spaces
  captionpos=b,                   % sets the caption-position to bottom
  breaklines=true,                % sets automatic line breaking
  breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
  escapeinside={/<}{>/}           % if you want to add a comment within your code
}

\lstset{
morekeywords={
  start,
  absorb, 
  squeeze,
  commit,
  encrypt,
  decrypt, 
  NULL,
  KEY,
  DATA,
  TEXT,
  OUT
}}

%%
%%
\endinput
